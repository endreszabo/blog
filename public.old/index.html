<!doctype html><html lang=en><title>end.re</title><link href=https://end.re/index.xml rel=alternate type=application/rss+xml title=end.re><link rel="shortcut icon" href=/favicon.png><link href=/a/s.css media=screen rel=stylesheet><link href=http://gmpg.org/xfn/11 rel=profile><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png href=/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicon-16x16.png sizes=16x16><link rel=manifest href=/manifest.json><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><meta name=theme-color content=#fafafa><meta property=og:title content=end.re><meta property=og:description content="yet another tech blog with underdeveloped thoughts, quick and dirty tips and tricks, random ramblings"><meta property=og:type content=website><meta property=og:locale content=en_US><meta property=og:url content=https://end.re/><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="yet another tech blog with underdeveloped thoughts, quick and dirty tips and tricks, random ramblings"><meta name=keywords content><meta name=author content="Endre Szabo"><meta name=generator content="Hugo 0.40.2"><header class=header-main><div class=logo><a title=end.re href=https://end.re><img src=/images/el.svg alt=logo width=90 class=logo-main></a></div><div class=nav><nav class=main-nav><ul><li><a href=/blog/>Blog</a><li><a href=/tutorial/>Tutorials</a><li><a href=/about/>About</a></ul></nav></div></header><main class=wrapper-main><section class=wrapper-content><h1 class=h1-title>Blog Posts</h1><div class=post-index><article class=post-content><h2 class=post-title><a href=/2018/06/12/ebp040_defeating-checkpoint-route-all-traffic-enforcement/>Defeating CheckPoint VPN Route-All-Traffic Policy Enforcement</a></h2><span class=a-meta><a class=category-proof-of-concept href=/categories/proof-of-concept/>Proof of Concept</a></span>
<span class=m-split><a class=tag-firewall href=/tags/firewall/>#firewall</a>,
<a class=tag-vpn href=/tags/vpn/>#vpn</a>,
<a class=tag-hacks href=/tags/hacks/>#hacks</a></span>
<time class=m-split datetime=2018-06-12T07:20:30&#43;00:00>Jun 12th, 2018</time></article><article class=post-content><div class=entry-content><a class=index-image href=/2018/06/12/ebp040_defeating-checkpoint-route-all-traffic-enforcement/><img src=/p/ebp040/route-all-client-traffic.png class=alignright alt="Defeating CheckPoint VPN Route-All-Traffic Policy Enforcement"></a><p>Quite a bit of the enterprises have chosen to use CheckPoint VPN solutions to allow remote access to their corporate networks. This platform is widely used and it&rsquo;s up to the security administrators to create the actual VPN security policies that apply to the connecting clients. Among these security rules, it&rsquo;s very common to enforce all of the client&rsquo;s traffic to go through the tunnel, be it destined to the corporate office or not, like Internet traffic that the corporation has noting to with. There is even a knowledge base entry on how to set up to <a href="https://supportcenter.checkpoint.com/supportcenter/portal?eventSubmit_doGoviewsolutiondetails=&amp;solutionid=sk101239" target=_blank>Route all traffic from Remote Access clients, including internet traffic, through Security Gateway</a>. On the sad side effect, when these rules apply, it is also impossible to connect to the VPN client itself from the same subnet the client resides on. And this leads to being unable to do SSH reverse port forwards to access corporate resources from outside of this client. However, this would be really useful in my scenario, where the connecting client is a Windows VM on my ArchLinux host, and I&rsquo;d like to access over-the-tunnel corporate unix hosts using the friendly and very convenient to use OpenSSH <em>from</em> the ArchLinux host and not from the Windows VM using PuTTY or something legacy dumb clients like that.<p>Using a netfilter rule with a trick on the ArchLinux host I managed to make easy to use transparent reverse port forwardings that also &ldquo;complies&rdquo; with the security enforcement rules of the VPN client.</p><a href=/2018/06/12/ebp040_defeating-checkpoint-route-all-traffic-enforcement/ class=more-link>Read more &rarr;</a></div><div style=clear:both></div></article><hr><article class=post-content><h2 class=post-title><a href=/2018/06/07/ebp037_martian-source-or-destination-traffic-explained/>Linux Kernel Martian Source Logs Explained</a></h2><span class=a-meta><a class=category-proof-of-concept href=/categories/proof-of-concept/>Proof of Concept</a></span>
<span class=m-split><a class=tag-networking href=/tags/networking/>#networking</a>,
<a class=tag-linux href=/tags/linux/>#linux</a></span>
<time class=m-split datetime=2018-06-07T08:39:19&#43;00:00>Jun 7th, 2018</time></article><article class=post-content><div class=entry-content>Quite a bit of our customers&rsquo; IT guys happen to misinterpret the real meaning of the martian source traffic logs they see on their gateway hosts.
Paste your logs in the above area and see their explanations here.</div><div style=clear:both></div></article><hr><article class=post-content><h2 class=post-title><a href=/2018/05/31/ebp036_archzfs-repo-for-kernels/>ArchZFS companion repo for dependent kernel versions</a></h2><span class=a-meta><a class=category-proof-of-concept href=/categories/proof-of-concept/>Proof of Concept</a></span>
<span class=m-split><a class=tag-linux href=/tags/linux/>#linux</a>,
<a class=tag-zfs href=/tags/zfs/>#zfs</a></span>
<time class=m-split datetime=2018-05-31T21:33:58&#43;00:00>May 31st, 2018</time></article><article class=post-content><div class=entry-content><a class=index-image href=/2018/05/31/ebp036_archzfs-repo-for-kernels/><img src=/p/ebp036/archzfs.png class=alignright alt="ArchZFS companion repo for dependent kernel versions"></a><p>As per the ArchZFS repository README: &ldquo;occasionally the OpenZFS project gets behind on stable support for the latest Linux Kernel release. This means that if Linux 4.15 is released to core, but the latest stable release of OpenZFS does not support Linux 4.15, it is not possible to perform a system update. Sometimes it can take a few days, a few weeks, or a month to release a new stable version of OpenZFS&rdquo;. Based on the good ol&rsquo; Gentoo memories, you might think that the package manager of this ultramodern distribution surely can handle different kernel versions installed at the same time? Unfortunately, the implementation reality of <code>pacman</code>, the package manager of ArchLinux follows a different stereotype.<p>See my ArchZFS-compatible kernel packages repository that offers a solution for this problem.</p><a href=/2018/05/31/ebp036_archzfs-repo-for-kernels/ class=more-link>Read more &rarr;</a></div><div style=clear:both></div></article><hr><article class=post-content><h2 class=post-title><a href=/2018/04/17/ebp023_shipping-logs-to-logz.io-service/>Shipping logs to the logz.io service</a></h2><span class=a-meta><a class=category-tutorial href=/categories/tutorial/>Tutorial</a></span>
<span class=m-split><a class=tag-logging href=/tags/logging/>#logging</a></span>
<time class=m-split datetime=2018-04-17T09:43:18&#43;00:00>Apr 17th, 2018</time></article><article class=post-content><div class=entry-content><a class=index-image href=/2018/04/17/ebp023_shipping-logs-to-logz.io-service/><img src=/p/ebp023/logzio-logo.png class=alignright style=width:20% alt="Shipping logs to the logz.io service"></a><p>Some of you may have heard of <a href=https://logz.io/ target=_blank>Logz.io</a>, a yet-another-company that provides <em>ELK as a Service</em>. Their marketing is quite good, they have great newsletters, tutorials and webcasts, so I thought to myself to let&rsquo;s check &lsquo;em out. After registration you are taken to the wiki entry that lets you configure your gear to ship your logs logz.io ingest servers. While the wiki looks pretty comprehensive, they evidently missed out the good old Unix player here, <code>syslog-ng</code>. Seeing configuration guides for all these &ldquo;next-gen&rdquo;, &ldquo;cloud-native&rdquo;, &ldquo;serverless&rdquo; totally hyped piece of craps without mentioning <code>syslog-ng</code> at all I feel being kinda old school.<p>So this post is the missing manual on how to ship logs to logz.io using <code>syslog-ng</code>.</p><a href=/2018/04/17/ebp023_shipping-logs-to-logz.io-service/ class=more-link>Read more &rarr;</a></div><div style=clear:both></div></article><hr><article class=post-content><h2 class=post-title><a href=/2015/07/09/ebp005_the-pdnsapp-part1.html/>The pdnsapp - part 1</a></h2><span class=a-meta><a class=category-proof-of-concept href=/categories/proof-of-concept/>Proof of Concept</a></span>
<span class=m-split><a class=tag-dns href=/tags/dns/>#dns</a></span>
<time class=m-split datetime=2015-07-09T05:59:00&#43;00:00>Jul 9th, 2015</time></article><article class=post-content><div class=entry-content><p>One of my projects called <code>pdnsapp</code> is a <a href=https://www.python.org/ target=_blank>Python</a> based microframework aimed to help develop DNS based applications, very much like <a href=http://flask.pocoo.org target=_blank>Flask</a> or <a href=http://bottlepy.org/ target=_blank>Bottle</a> do for HTTP or like <a href=http://lamsonproject.org/ target=_blank>Lamson</a> does with SMTP. Like most of the frameworks of this kind it needs an &lsquo;application server&rsquo; to run. This server for <code>pdnsapp</code> is currently <a href=http://www.powerdns.com/ target=_blank>PowerDNS</a>. For basic functionality it has no dependencies other than the Python standard libraries.</p><a href=/2015/07/09/ebp005_the-pdnsapp-part1.html/ class=more-link>Read more &rarr;</a></div><div style=clear:both></div></article><hr><article class=post-content><h2 class=post-title><a href=/tutorial/etp001-vti-tunnel-interface-with-strongswan/>VTI Tunnel Interface with strongSwan</a></h2><span class=a-meta><a class=category-tutorial href=/categories/tutorial/>tutorial</a></span>
<span class=m-split><a class=tag-ipsec href=/tags/ipsec/>#ipsec</a>,
<a class=tag-strongswan href=/tags/strongswan/>#strongswan</a></span>
<time class=m-split datetime=2015-01-06T00:00:00&#43;00:00>Jan 6th, 2015</time></article><article class=post-content><div class=entry-content><a class=index-image href=/tutorial/etp001-vti-tunnel-interface-with-strongswan/><img src=/p/etp001/strongswanlogo.png class=alignright alt="VTI Tunnel Interface with strongSwan"></a><p>I successfully managed to get Linux VTI (Virtual Tunnel Interface) working with strongSwan. By using VTI it is no longer needed to rely on the routing policy database, making understanding and maintaining routes easier. Also with VTI you can see the cleartext traffic on the VTI interface itself. It was confusing to see actual tunnel traffic before using <code>tcpdump</code> using the standard policy database setup. (There are <code>ulog</code>/<code>nflog</code> hacks to see cleartext traffic in both direction though, similar to BSD <code>pflog</code>.)</p><a href=/tutorial/etp001-vti-tunnel-interface-with-strongswan/ class=more-link>Read more &rarr;</a></div><div style=clear:both></div></article><hr><article class=post-content><h2 class=post-title><a href=/2011/11/11/ebp004_thoughts-on-everyday-endianness/>Thoughts on everyday endiannes</a></h2><span class=a-meta><a class=category-half-baked-ideas href=/categories/half-baked-ideas/>Half Baked Ideas</a></span>
<span class=m-split><a class=tag-endianness href=/tags/endianness/>#endianness</a></span>
<time class=m-split datetime=2011-11-11T11:11:11&#43;00:00>Nov 11th, 2011</time></article><article class=post-content><div class=entry-content><a class=index-image href=/2011/11/11/ebp004_thoughts-on-everyday-endianness/><img src=/p/ebp004/oh-god.png class=alignright alt="Thoughts on everyday endiannes"></a><p>Just a quick note on 11/11/11: I&rsquo;d like to express how awesome big-endian is in all aspects of life. In Hungary we use big-endian for pretty much everything (very much like Japan), eg. representing dates, family and given names and addresses.<p></p><a href=/2011/11/11/ebp004_thoughts-on-everyday-endianness/ class=more-link>Read more &rarr;</a></div><div style=clear:both></div></article><hr><article class=post-content><h2 class=post-title><a href=/2011/07/18/ebp006_nginx-as-a-general-purpose-tcp-proxy/>Nginx as a general purpose TCP proxy</a></h2><span class=a-meta><a class=category-proof-of-concept href=/categories/proof-of-concept/>Proof of Concept</a></span>
<span class=m-split><a class=tag-nginx href=/tags/nginx/>#nginx</a></span>
<time class=m-split datetime=2011-07-18T11:00:18&#43;00:00>Jul 18th, 2011</time></article><article class=post-content><div class=entry-content>Nginx is well known for its powerful HTTP reverse-proxy features. Altough Nginx does its job well in pretty lot of situations, there are always a need for a general TCP proxy stuff. Sadly this feature does not come boundled in with the stock Nginx.
This is where 3rd party patches come in. There are quite some great patches out there, in this post I will write about nginx_tcp_proxy_module made by Weibin Yao from China (he has 13 different promising patches and modules for nginx, definitely worth a check).
<a href=/2011/07/18/ebp006_nginx-as-a-general-purpose-tcp-proxy/ class=more-link>Read more &rarr;</a></div><div style=clear:both></div></article><hr><article class=post-content><h2 class=post-title><a href=/2011/05/17/ebp003_thoughts-on-ipv6-reverse-dns-address-mapping-for-the-masses.html/>Thoughts on IPv6 Reverse DNS Address Mapping for the masses</a></h2><span class=a-meta><a class=category-half-baked-ideas href=/categories/half-baked-ideas/>Half Baked Ideas</a></span>
<span class=m-split><a class=tag-dns href=/tags/dns/>#dns</a></span>
<time class=m-split datetime=2011-05-17T18:29:00&#43;00:00>May 17th, 2011</time></article><article class=post-content><div class=entry-content><p>Reverse DNS records are good for you. Especially if you run your own SMTP MTAs. Without proper reverse-forward DNS record mapping, some nice anomalies may appear for you. You may have faced the fact some other MTAs shut down your incoming connection for no particular reason. OpenSSH daemon also has the option to check if your forward and reverse DNS entries match. Also, being on IRC with only an IP address is so 90&rsquo;s ;)<p></p><a href=/2011/05/17/ebp003_thoughts-on-ipv6-reverse-dns-address-mapping-for-the-masses.html/ class=more-link>Read more &rarr;</a></div><div style=clear:both></div></article><hr><article class=post-content><h2 class=post-title><a href=/2011/05/02/ebp002_nginx-altroot-with-conditional-autoindex/>Nginx Alternative Root With Conditional Autoindexing</a></h2><span class=a-meta><a class=category-proof-of-concept href=/categories/proof-of-concept/>Proof of Concept</a></span>
<span class=m-split><a class=tag-nginx href=/tags/nginx/>#nginx</a></span>
<time class=m-split datetime=2011-05-02T00:00:00&#43;00:00>May 2nd, 2011</time></article><article class=post-content><div class=entry-content><p>Recently I have developed the following Nginx setup to make my virtual host instance more advanced. It has the following features:<ul><li>The blog root directory served from a completely different directory than the regular <code>htdocs</code> root. Blog content has preference over the other files, so if the requested file is not found in the blog root, it falls back to the regular root.<li>There is a feature for conditional autoindexing (I don&rsquo;t like to expse my files by default): if I put a <code>.index</code> file into a directory, it will be publicly autoindexed, otherwise Nginx returns a 404 error (as instead on the default 403).<li>Handles <code>error_page</code> idoms well.</ul><p></p><a href=/2011/05/02/ebp002_nginx-altroot-with-conditional-autoindex/ class=more-link>Read more &rarr;</a></div><div style=clear:both></div></article><hr></div><nav class=pagination role=navigation aria-label="Pagination Navigation"><a href=/page/2/ rel=next class=next>Next &raquo;</a><ul class=page-numbers><li><span class="page-numbers current" aria-current=true aria-label="Current Page, Page 1">1</span><li><a class=page-numbers aria-label="Go to Page 1" href=/page/2/>2</a></ul></nav></section></main><footer id=footer class=inner><a rel=license href=http://creativecommons.org/licenses/by-sa/4.0/><img alt="Creative Commons License" style=border-width:0 src=/images/cc-by-sa-4-0.png></a><br>Website contents at end.re by Endre Szabo are licensed under the <a rel=license href=http://creativecommons.org/licenses/by-sa/4.0/>Creative Commons Attribution-ShareAlike 4.0 International License</a> unless stated otherwise.</footer>